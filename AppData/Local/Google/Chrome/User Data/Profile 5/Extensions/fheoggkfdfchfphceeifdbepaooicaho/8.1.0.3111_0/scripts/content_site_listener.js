/*!
 * 
 *     MCAFEE RESTRICTED CONFIDENTIAL
 *     Copyright (c) 2022 McAfee, LLC
 *
 *     The source code contained or described herein and all documents related
 *     to the source code ("Material") are owned by McAfee or its
 *     suppliers or licensors. Title to the Material remains with McAfee
 *     or its suppliers and licensors. The Material contains trade
 *     secrets and proprietary and confidential information of McAfee or its
 *     suppliers and licensors. The Material is protected by worldwide copyright
 *     and trade secret laws and treaty provisions. No part of the Material may
 *     be used, copied, reproduced, modified, published, uploaded, posted,
 *     transmitted, distributed, or disclosed in any way without McAfee's prior
 *     express written permission.
 *
 *     No license under any patent, copyright, trade secret or other intellectual
 *     property right is granted to or conferred upon you by disclosure or
 *     delivery of the Materials, either expressly, by implication, inducement,
 *     estoppel or otherwise. Any license under such intellectual property rights
 *     must be expressed and approved by McAfee in writing.
 *
 */(()=>{"use strict";const e="CACHE_STORE",t="CONTENT_HANDLER",s="EXECUTE_COMMAND",n="FOCUS_OR_CREATE_TAB",a="GET_BK_GLOBALS",o="GET_EXTENSION_STATUS",c="GET_TAB_DATA",m="TI_REQUEST",i="PLACEHOLDER_TEXT",r="REMOVE_TAB",d="SEND_TELEMETRY",E="SET_VIEWPORT",T="WHITELIST",_="RESET_NATIVE_SETTING",g="UPDATE_BK_NATIVE_SETTINGS",u="SHOW_SIDEBAR_MAIN",S="GET_POPUP_DATA",l="GET_SETTINGS_DATA",M="RESET_SETTINGS",A="GET_TYPOSQUATTING_DATA",I="IS_FRAME_BLOCKED",h="IS_WHITELISTED",P="ANY_BLOCKED_IFRAMES",O="ANY_BLOCKED_CRYPTOSCRIPTS",D="UNBLOCK_ALL_IFRAMES",N="VIEW_SITE_REPORT",C="SEARCH_ANNOTATION",L="UPDATE_ENGINE_STATS",R="SOCIAL_MEDIA_ANNOTATION",F="UPDATE_RAT_DETECTION_SHOWING_FLAG",p="SEARCH_SUGGEST",G="SAVE_FORM_INFO",f="GET_FORM_INFO_CACHE",W="CLEAR_FORM_INFO_CACHE",y="SAVE_MULTISTEP_LOGIN",U="GET_FD_WEIGHTS",w="GET_FD_EXCEPTIONS",H="GET_FD_CRF_PARAMS",B="CLEAR_DWS_INFO",b="GET_CACHED_DWS_INFO",v="UPDATE_DWS_WHITELIST",V="LAUNCH_IDPS_LOGIN",k="UPDATE_DWS_SHOWN",x="GET_APS_DETAILS",Y="SIGN_UP_FORM_DETECTED",K="SET_FF_POLICY_COLLECTION",q="SET_FF_POLICY_LAST_SHOWN",X="PING_CONTENT_SITE_LISTENER",Q="BROADCAST_TO_FOREGROUND",J=0,j=23,z=24,Z=0;class ${constructor(e){this.pingCommand=e,this.basePingListener()}basePingListener(e=null){chrome.runtime.onMessage.addListener(((t,s,n)=>{if(s.id!==chrome.runtime.id)return;const{command:a}=t;a===this.pingCommand&&(n({content:!0}),"function"==typeof e&&e())}))}}const ee=chrome;class te{static handlePromiseMessage(e,t=null){return new Promise(((s,n)=>{chrome.runtime.sendMessage(e,(e=>{"function"==typeof t?t(s,n,e):((e,t,s)=>{chrome.runtime.lastError&&t(chrome.runtime.lastError.message),e(s)})(s,n,e)}))}))}}class se{static cacheStore(t,s){const n=e;return te.handlePromiseMessage({command:n,action:t,data:s})}static isFrameBlocked(e){const t=I;return te.handlePromiseMessage({command:t,url:e})}static makeMTIRequest(e,t){const s={command:m,requestData:e,referer:t};return te.handlePromiseMessage(s)}static executeCommand(e,t){const n=s;ee.runtime.sendMessage({command:n,commandId:e,params:t})}static focusOrCreateTab(e){const t=n;ee.runtime.sendMessage({command:t,url:e})}static closeTab(){const e=r;ee.runtime.sendMessage({command:e})}static whitelist(e,t,s){const n=T;return te.handlePromiseMessage({action:e,command:n,type:t,data:s})}static getPopupData(){const e=S;return te.handlePromiseMessage({command:e})}static getSettingsData(){const e=l;return te.handlePromiseMessage({command:e})}static searchAnnotation(e,t){const s=C;return te.handlePromiseMessage({action:e,data:t,command:s})}static socialMediaAnnotation(e,t){const s=R;return te.handlePromiseMessage({action:e,data:t,command:s})}static async getBkGlobals(e=!1){return new Promise((t=>{const s=a;te.handlePromiseMessage({command:s,bIncludeSearchEngines:e}).then((e=>{t(JSON.parse(e))}))}))}static viewSiteReport(e=null,t=!1){const s=N;ee.runtime.sendMessage({command:s,url:e,showInNewTab:t})}static getTypoSquattingData(e){const t=A;return te.handlePromiseMessage({command:t,domain:e})}static getPlaceholderText(e){const t=i;return te.handlePromiseMessage({command:t,id:e})}static setViewPort(e,t){const s=E;ee.runtime.sendMessage({command:s,x:e,y:t})}static sendTelemetry(e){const t=d;ee.runtime.sendMessage({command:t,telemetry:e})}static anyBlockedIframes(e){const t=P;return te.handlePromiseMessage({command:t,frameUrls:e})}static anyBlockedCryptoScripts(){const e=O;return te.handlePromiseMessage({command:e})}static resetSettings(){const e=M;ee.runtime.sendMessage({command:e})}static sendEngineStat(e){ee.runtime.sendMessage({command:L,engine:e})}static contentHandler(e){const s=t;ee.runtime.sendMessage({command:s,message:e})}static getTabData(e={}){const t={command:c,...e};return te.handlePromiseMessage(t)}static isWhitelisted(e){const t={command:h,url:e};return te.handlePromiseMessage(t)}static getExtensionStatus(e){return te.handlePromiseMessage({command:o,extension_id:e})}static unblockAllIframes(){const e=D;ee.runtime.sendMessage({command:e})}static updateRatDetectionShowingFlag(e){const t=F;ee.runtime.sendMessage({command:t,showed:e})}static getSearchSuggest(e){const t={command:p,searchTerm:e};return te.handlePromiseMessage(t)}static resetNativeSetting(e){const t=_;ee.runtime.sendMessage({command:t,setting:e})}static saveFormInfo(e,t){const s=G;ee.runtime.sendMessage({command:s,username:e,hostname:t})}static saveMultiStepLogin(e,t){const s=y;ee.runtime.sendMessage({command:s,data:e,completeLogin:t})}static getFormInfoCache(){const e=f;return te.handlePromiseMessage({command:e})}static clearFormInfoCache(){const e=W;ee.runtime.sendMessage({command:e})}static updateDWSWhitelist(e){const t=v;ee.runtime.sendMessage({command:t,email:e})}static getCachedDWSInfo(e){const t={command:b,email:e};return te.handlePromiseMessage(t)}static clearCachedDWSInfo(e){const t=B;ee.runtime.sendMessage({command:t,email:e})}static updateDWSShown(e){const t=k;ee.runtime.sendMessage({command:t,email:e})}static getAPSDetails(){const e=x;return te.handlePromiseMessage({command:e})}static signUpFormDetected(){const e=Y;ee.runtime.sendMessage({command:e})}static updateBkNativeSettings(e,t){const s=g;ee.runtime.sendMessage({command:s,name:e,value:t})}static launchIDPSLogin(){const e=V;ee.runtime.sendMessage({command:e})}static showSidebarMain(){const e=u;ee.runtime.sendMessage({command:e})}static setFFPolicyCollection({personal:e,activity:t}){const s=K;ee.runtime.sendMessage({command:s,personal:e,activity:t})}static setFFPolicyLastShown(){const e=q;ee.runtime.sendMessage({command:e})}static broadcastToForeground(e){const t=Q;ee.runtime.sendMessage({command:t,payload:e})}static getFDWeights(){const e=U;return te.handlePromiseMessage({command:e})}static getFDExceptions(){const e=w;return te.handlePromiseMessage({command:e})}static getFDCrfParams(){const e=H;return te.handlePromiseMessage({command:e})}}(new class extends ${constructor(){super(X)}main(){window.addEventListener("message",(e=>{if(!e)return;const{data:t}=e;if(!t)return;const{request_type:s,payload:n}=t;if(void 0!==s&&void 0!==n){if(s!==J||n.done||window.postMessage({request_type:Z,payload:{done:!0}},e.origin),s===j){const e=chrome.runtime.getURL("html/settings.html");se.focusOrCreateTab(e)}s===z&&se.showSidebarMain()}}),!1)}}).main()})();
//# sourceMappingURL=../sourceMap/scripts/content_site_listener.js.map